<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Peng-Robinson Equation of State for Mixtures</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/mathjs@11.8.0/lib/browser/math.min.js"></script>
    <script>
        MathJax = {
            chtml: {
                scale: 0.95,
                mathmlSpacing: true, // true for MathML spacing rules, false for TeX rules
                displayAlign: 'left', // default for indentalign when set to 'auto'
            },
            tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']],
                displayMath: [['$$', '$$'], ['\\[', '\\]']]
            }
        };
    </script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">    
    <link rel="stylesheet" href="./style.css">
</head>
<body>
    <div class="container">
        <!-- Hamburger Menu -->
        <div class="hamburger-menu">
            <div class="menu-btn">
                <i class="fas fa-bars"></i>
            </div>
            <div class="menu-content">
                <div class="menu-item" data-modal="directions">
                    <i class="fas fa-book"></i>
                    <span>Directions</span>
                </div>
                <div class="menu-item" data-modal="details">
                    <i class="fa-solid fa-paperclip"></i>
                    <span>Details</span>
                </div>
                <div class="menu-item" data-modal="about">
                    <i class="fas fa-info-circle"></i>
                    <span>About</span>
                </div>
            </div>
        </div>
        
        <div class="controls">
            <div class="control-group">
                <label for="temperature">temperature (K): <span id="tempValue" class="slider-value">390</span></label>
                <div class="slider-container">
                    <input type="range" id="temperature" min="350" max="415" step="1" value="390">
                </div>
            </div>
            
            <div class="control-group">
                <label for="moleFraction">n-butane liquid mole fraction <i>x</i><sub>1</sub>: <span id="moleValue" class="slider-value">0.55</span></label>
                <div class="slider-container">
                    <input type="range" id="moleFraction" min="0" max="0.75" step="0.01" value="0.55">
                </div>
            </div>
        </div>
        
        <div class="chart-container">
            <canvas id="chart"></canvas>
            <div class="info-box">
                <div class="info-title">vapor-liquid equilibrium</div>
                <div id="pressureValue">P = 0.00 MPa</div>
                <div id="x1Value" style="color: blue;"><i>x</i><sub>1</sub> = 0.00</div>
                <div id="y1Value" style="color: green;"><i>y</i><sub>1</sub> = 0.00</div>
            </div>
        </div>
    </div>


        <!-- Modal Dialogs -->
        <div id="directions-modal" class="modal">
            <div class="modal-content">
                <span class="close-btn">&times;</span>
                <div class="modal-header">
                    <h2>Directions</h2>
                </div>
                <div class="modal-body">
                    <p>
                        This simulation uses the Peng-Robinson equation of state for mixtures to plot isotherms for n-butane(1)/n-octane(2) mixtures on a log pressure 
                        versus log volume graph. Use the sliders to select the temperature and the mole fraction \(x_1\) of the liquid phase (blue  isotherm). The green 
                        isotherm is for the vapor phase (mole fraction \(y_1\)) that is in equilibrium with the liquid, The values of \(y_1\) and the equilibrium pressure 
                        in the upper-right corner are determined from Raoult's law. The dashed black line connects the liquid and vapor compositions that are in equilibrium.
                    </p>
                </div>
            </div>
        </div>
        
        <div id="details-modal" class="modal">
            <div class="modal-content">
                <span class="close-btn">&times;</span>
                <div class="modal-header">
                    <h2>Details</h2>
                </div>
                <div class="modal-body">
                    <p>
                        The Peng-Robinson equation of state for mixtures is used to plot pressure P versus volume V on a log-log graph:
                        $$ P = \frac{RT}{V-b_m} - \frac{a_m}{V^2 - 2Vb_m - b_m^2} $$
                        where R is the gas constant ([cm\(^3\) MPa] / [mol K]), T is temperature (K), P is in MPa, and V is in cm\(^3\) / mol.
                    </p>
                    <p>
                        \(a_m\) is the attraction parameter and \(b_m\) is the repulsion parameter for the mixture:
                        $$ a_m = \Sigma_{i=1}^2 \Sigma_{j=1}^2 z_i z_j (1-k_{ij} \sqrt{a_i a_j}) $$
                        $$ b_m = \Sigma_{i=1}^2 z_i b_i $$
                        where z\(_i\) is the component mole fraction, \(k_{ij}\) is the binary interaction parameter, and a and b are the attraction and
                        repulsion parameters for a pure component.
                    </p>
                    <p>
                        The binary interaction parameter can be calculated [1]:
                        $$ k_{ij} = 1 = \frac{1}{2} \frac{b_2}{b_1} \sqrt{\frac{a_1}{a_2}} - \frac{1}{2} \frac{b_1}{b_2} \sqrt{\frac{a_2}{a_1}}
                            + \frac{1}{2} \frac{b_2 RT}{\sqrt{a_1 a_2}} \frac{\theta_1}{(T/T_{c,1})^{\theta_2}} $$
                        for an alkane/alkane mixture \(\theta_1 = 0.22806\) and \(\theta_2 = 0.18772\).
                    </p>
                    <p>
                        The attraction and repulsion parameters for a pure component are:
                        $$ a = 0.457 \frac{R^2 T_c^2}{P_c}(1 + \kappa (1 - \sqrt{T/T_c}))^2 $$
                        $$ b = 0.00778 \frac{RT_c}{P_c} $$
                        where \(T_c\) is the critical temperature (K) and \(P_c\) is the critical pressure (MPa).
                    </p>
                    <p>
                        $$\kappa = 0.37464 + 1.54226 \omega - 0.26992 \omega^2$$
                        where $\kappa$ is a simplification term and $\omega$ is the acentric factor.
                    </p>
                    <p>
                        Raoult's law is used to calculate the pressure of the mixture at VLE:
                        $$P_{vle} = x_1 P_1^{sat} + (1 - x_1) P_2^{sat}$$
                        and $P_{vle}$ is used to determine the vapor mole fraction:
                        $$y_1 = x_1 P_1^{sat} / P_{vle}$$
                        where $x_1$ and $y_1$ are the liquid and vapor mole fractions of hexane, and $P_i^{sat}$ is the saturation pressure that is calculated using the Antoine equation:
                        $$P_i^{sat} = 10^{A_i - \frac{B_i}{T + C_i}}$$
                        where $A_i$, $B_i$ and $C_i$ are Antoine constants.
                    </p>
                    <p>
                        Reference
                    </p>
                    <p>
                        [1] A. O. Elnabawy, S. K. Fateen and M. M. Khalil, "Semi-empirical Correlation for Binary Interaction Parameters of the Peng-Robinson Equation of State with the van 
                        der Waals Mixing Rules for the Prediction of High-Pressure Vapor-Liquid Equilibrium," <i>Journal of Advanced Research,</i> <b>4</b>(2), 2013 pp. 137\[Dash]145. 
                        <a href="https://dx.doi.org/10.1016/j.jare.2012.03.004">doi:10.1016/j.jare.2012.03.004.</a>
                    </p>
                </div>
            </div>
        </div>

        <div id="about-modal" class="modal">
            <div class="modal-content">
                <span class="close-btn">&times;</span>
                <div class="modal-header">
                    <h2>About</h2>
                </div>
                <div class="modal-body">
                    <p>
                        This simulation was created in the Department of Chemical and Biological Engineering at University of Colorado Boulder for LearnChemE.com by Drew Smith 
                        under the direction of Professor John L. Falconer and Michelle Medlin. It is a JavaScript/HTML5 implementation of a 
                        <a href="https://demonstrations.wolfram.com/PengRobinsonEquationOfStateForMixtures/">Mathematica simulation</a> by Rachael 
                        Baumann. It was prepared with financial support from the National Science Foundation (DUE 2336987 and 2336988) in collaboration with Washington State 
                        University. Address any questions or comments to LearnChemE@gmail.com.   
                    </p>
                </div>
            </div>
        </div>
    <script src="./index.js"></script>
</body>
</html>