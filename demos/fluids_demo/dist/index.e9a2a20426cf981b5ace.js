(()=>{"use strict";const e=1e3,t=600;let o={x:0,y:0},n=!1;function i(e){n=e}function r(e){o=e}function c(){const e=document.getElementById("hamburger-menu"),t=e.classList.contains("show");if(e.classList.toggle("show"),!t){e.innerHTML="";[{label:"Directions",url:"html/overlay/directions.html",action:"modal"},{label:"About",url:"html/overlay/about.html",action:"modal"},{label:"Worksheet",url:"assets/worksheet.pdf",action:"download",filename:"worksheet.pdf"}].forEach((t=>{const o=document.createElement("button");o.type="button",o.className="btn btn-light btn-sm hamburger-menu-button",o.textContent=t.label,o.addEventListener("click",(o=>{var n,i;o.stopPropagation(),"modal"===t.action?fetch(t.url).then((e=>{if(!e.ok)throw new Error(`Network error loading ${t.url}`);return e.text()})).then((e=>{document.getElementById("overlayContainer").innerHTML=e;const o=t.label.toLowerCase(),n=document.getElementById(o);if(n){const e=bootstrap.Modal.getInstance(n);e&&e.dispose();new bootstrap.Modal(n).show()}else console.error(`Modal element with ID '${o}' not found in fetched HTML from ${t.url}.`)})).catch((e=>console.error("Error loading/showing modal:",e))):"download"===t.action&&(n=t.url,i=t.filename,fetch(n).then((e=>{if(!e.ok)throw new Error(`Network response was not ok (${e.status})`);return e.blob()})).then((e=>{const t=window.URL.createObjectURL(e),o=document.createElement("a");o.style.display="none",o.href=t,o.download=i||n.split("/").pop(),document.body.appendChild(o),o.click(),window.URL.revokeObjectURL(t),document.body.removeChild(o)})).catch((e=>{console.error("Download failed:",e)}))),e.classList.remove("show")})),e.appendChild(o)}))}}document.addEventListener("click",(e=>{const t=document.getElementById("hamburger-menu"),o=document.getElementById("hamburger-icon");t&&o&&!t.contains(e.target)&&!o.contains(e.target)&&t.classList.remove("show")}));let a=window.innerWidth-60,l=a*t/e;const s=SVG().addTo("#svg-container").size(a,l);window.svgDraw=s,s.viewbox(0,0,e,t),s.attr("preserveAspectRatio","xMidYMid meet"),window.addEventListener("resize",(function(){a=window.innerWidth-60,l=a*t/e,s.size(a,l)})),document.addEventListener("DOMContentLoaded",(()=>{const e=document.getElementById("hamburger-icon");e&&e.addEventListener("click",c)})),function(c){c.text("zoom with the scroll wheel").move(400,0).font({size:16,anchor:"left"}),c.text("After zooming, drag mouse to move image").move(350,15).font({size:16,anchor:"left"});const a=0,l=0,s=e,d=t;c.viewbox(a,l,s,d);const m=c.rect(e,t).fill({color:"#fff",opacity:0});m.back(),m.on("mousedown",(function(e){c.viewbox().width>=s||(i(!0),r({x:e.clientX,y:e.clientY}))})),m.on("mousemove",(function(e){if(!n)return;e.preventDefault();const t=e.clientX-o.x,i=e.clientY-o.y,a=c.viewbox();a.width<s&&c.viewbox(a.x-t,a.y-i,a.width,a.height),r({x:e.clientX,y:e.clientY})})),m.on("mouseup",(function(){i(!1)})),document.addEventListener("mouseup",(()=>{i(!1)})),c.on("wheel",(function(o){o.preventDefault();const n=o.deltaY<0?.98:1.02,i=c.viewbox();let r=i.width*n,m=i.height*n;if(r>=s)return void c.viewbox(a,l,s,d);const u=c.node.createSVGPoint();u.x=o.clientX,u.y=o.clientY;const h=u.matrixTransform(c.node.getScreenCTM().inverse());let w=h.x-(h.x-i.x)*n,f=h.y-(h.y-i.y)*n;w=Math.max(0,Math.min(w,e-r)),f=Math.max(0,Math.min(f,t-m)),c.viewbox(w,f,r,m)}))}(s)})();