<!doctype html>

<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="content-language" content="en">
  <title>x-y Diagram Virtual Laboratory</title>
  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script>
    MathJax = {
      chtml: {
        scale: 0.9,
        mathmlSpacing: true,
        displayAlign: 'left',
      }
    };
  </script>
  <script type="text/javascript" id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-204988035-3"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-204988035-3');
  </script>
</head>

<body>

  <div class="simulation-controls">
    <div class="input-area">
  
      <div class="input-row">
        <div class="data-name">volume of component A in boiling flask</div>
        <input type="range" id="ml-of-a-slider" min="0" max="100" step="1" value="50.0">
        <div class="data-value" id="ml-of-a-value">50</div>
        <div class="data-metric">mL</div>
      </div>
  
      <div class="collection-button-container">
        <div id="collection-button">collect sample</div>
        <div id="proceed-to-submit-button">submit answers</div>
        <div id="download-data-button">download measurements</div>
        <div class="modal-buttons-row">
          <div id="directions-button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#directions-modal">Directions</div>
          <div id="details-button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#details-modal">Details</div>
          <div id="about-button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#about-modal">About</div>
        </div>
      </div>
    </div>

  </div>

  <div id="p5-container"></div>

  <div id="reset-exercise-button" data-bs-toggle="modal" data-bs-target="#reset-modal">reset laboratory</div>

  <div id="submit-inputs-container">
    <input type="number" id="submit-A12" placeholder="enter value for A12 here" style="display: none;"/>
    <input type="number" id="submit-A12-CI" placeholder="enter 95% CI for A12 here" style="display: none;"/>
    <input type="number" id="submit-A21" placeholder="enter value for A21 here" style="display: none;"/>
    <input type="number" id="submit-A21-CI" placeholder="enter 95% CI for A21 here" style="display: none;"/>
    <input type="text" id="submit-name" placeholder="enter your name(s) here" style="display: none;"/>
  </div>

  <div id="submit-button" style="display: none;" disabled="yes">view results</div>
  <div id="back-button" style="display: none;">go back to lab</div>
  <div id="reset-button" style="display: none;">reset exercise</div>

  <div class="modal fade" id="reset-modal" tabindex="-1" role="dialog" aria-labelledby="reset-modal-label"
    aria-hidden="true">
    <div class="modal-dialog modal-lg" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="reset-modal-label">Reset virtual laboratory</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close">
            <span aria-hidden="true"></span>
          </button>
        </div>
        <div class="modal-body warning">
          <div class="warning-text">Warning: resetting the virtual laboratory will erase all of your measurement data PERMANENTLY and assign new Margules constants, molecular weights of components A and B, densities of components A and B, and all Antoine constants. You will also receive 1000 mL of components A and B. Click the button below to reset the virtual laboratory. Otherwise, exit this window to continue your laboratory.</div>
          <div id="reset-permanently">reset laboratory</div>
        </div>
      </div>
    </div>
  </div>

  <div class="modal fade" id="directions-modal" tabindex="-1" role="dialog" aria-labelledby="directions-modal-label"
    aria-hidden="true">
    <div class="modal-dialog modal-lg" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="directions-modal-label">Directions</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close">
            <span aria-hidden="true"></span>
          </button>
        </div>
        <div class="modal-body">
          <div class="directions-container">
            <div class="directions-tabs">
              <div class="directions-tab active" id="directions-tab-getting-started">Getting started</div>
              <div class="directions-tab" id="directions-tab-learning-objectives">Learning objectives</div>
              <div class="directions-tab" id="directions-tab-video">Video instructions</div>
              <div class="directions-tab" id="directions-tab-analysis">Analyzing data</div>
              <div class="directions-tab" id="directions-tab-post-lab">Post-lab questions</div>
            </div>
            <div class="directions-contents">
              
              <div class="directions-content active" id="directions-content-getting-started">
                This is a virtual laboratory in which you will use nonlinear regression to determine the Margules parameters of a randomized binary mixture (for more information on the Margules parameters, exit this window and click the "details" button near the top of the page). You are given 1000 mL of two liquids, and for each measurement you will use a total of 100 mL of a liquid mixture to find the vapor composition for that given mixture. For example, you may put 80 mL of liquid A into the flask alongside 20 mL of liquid B, then press "collect sample" to find that the vapor mole fraction of A for that mixture is 0.951. Your results will be different, this is just an example.<br><br>You may collect up to 20 samples, and the virtual laboratory will store the data you have collected so you may download your data as a spreadsheet at a later time. If you close the web page and come back, you will still be able to access your stored data by clicking "download measurements". In other words, all of your data is stored in your web browser should you exit out of the laboratory. The virtual laboratory will also remember how much liquid you have used, as well as the density/molecular weights/antoine constants. If for any reason you want to restart the virtual laboratory with new, randomized Margules parameters and liquid properties, you may click "reset laboratory" at the bottom-right of the screen. For video instructions on how to use this virtual laboratory, click the "video instructions" tab and view the YouTube video.<br><br>You should carefully plan what liquid volumes to use for your data points. You must use the liquid's molecular weight and density to determine the volume of each liquid necessary for a given liquid mole fraction. Since the volume of vapor collected is negligible compared to the volume of liquid in the flask, you can assume that the liquid mole fraction can be determined from the volumes of liquid A and B in the flask.<br><br>Once you have taken a sufficient number of data points, you will need to analyze your data and use nonlinear regression to determine the Margules parameters. Navigate to the "Analyzing data" tab to learn more about this process and view relevant screencasts.  After you have completed your data analysis, click the red "submit answers" button near the top of the virtual laboratory to enter your esimated Margules parameters and 95% confidence intervals, and to view the correct Margules parameters. You may screenshot the answer submission page and send this to your instructor for reference.
              </div>

              <div class="directions-content" id="directions-content-learning-objectives">

              </div>
              
              <div class="directions-content" id="directions-content-video">

              </div>
              
              <div class="directions-content" id="directions-content-analysis">

              </div>
              
              <div class="directions-content" id="directions-content-post-lab">

              </div>

            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="modal fade" id="details-modal" tabindex="-1" role="dialog" aria-labelledby="details-modal-label"
    aria-hidden="true">
    <div class="modal-dialog modal-lg" role="document">
      <div class="modal-content">

        <div class="modal-header">
          <h5 class="modal-title" id="details-modal-label">Details</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close">
            <span aria-hidden="true"></span>
          </button>
        </div>

        <div class="modal-body">
          <div class="details-text">The saturation pressure of component \( i = (A, B) \) is calculated using the Antoine equation:</div>

          <div class="details-eqn">
            $$
            [1] \qquad P_{i}^{sat} = 10^{ ( A_{i} - \frac{ B_{i} }{ T + C_{i} } ) }
            $$
          </div>

          <div class="details-text">where \( P_{i}^{sat} \) is saturation pressure of component \( i \) (mmHg), \( A_{i} \), \( B_{i} \), and \( C_{i} \) are Antoine constants of component \( i \), and \( T \) is temperature (°C). The two-parameter Margules model is used to calculate the activity coefficients for a non-ideal liquid mixture of components A and B. This model fits the excess Gibbs free energy:</div>

          <div class="details-eqn">
            $$
            [2] \qquad \frac{G^{E}}{RT} = x_{A} x_{B} (A_{21} x_{A} + A_{12} x_{B})
            $$
          </div>

          <div class="details-text">where \( G_{E} \) is excess Gibbs energy, and \( R \) is the ideal gas constant. The activity coefficients \( \gamma_{A} \) and \( \gamma_{B} \) are given by:</div>

          <div class="details-eqn">
            $$
            [3] \qquad \mathrm{ln} \, \gamma_{A} = x_{B}^{2} (A_{12} + 2 ( A_{21} - A_{12} ) x_{A} )
            $$

            $$
            [4] \qquad \mathrm{ln} \, \gamma_{B} = x_{A}^{2} (A_{21} + 2 ( A_{12} - A_{21} ) x_{B} )
            $$
          </div>

          <div class="details-text">where \( x_{A} \) and \( x_{B} \) are the liquid mole fractions of components  and A and B, and \( x_{A} + x_{B} = 1 \), and \( A_{12} \) and \( A_{21} \) are the Margules parameters. The modified Raoult's law is used to calculate the bubble-point and dew-point pressures using the  \( K \) factors:</div>

          <div class="details-eqn">
            $$
            [5] \qquad K_{i} = \frac{y_{i}}{x_{i}} = \gamma_{i} \frac{P_{i}^{sat}}{P}
            $$
          </div>

          <div class="details-text">where \( y_{i} \) is the vapor mole fraction and \( y_{A} + y_{B} = 1 \), and \( P \) is the total pressure (mmHg). Bubble-point pressure calculation:</div>

          <div class="details-eqn">
            $$
            [6] \qquad P = x_{A} \gamma_{A} P_{A}^{sat} + x_{B} \gamma_{B} P_{B}^{sat}
            $$
          </div>

          <div class="details-text">Dew-point pressure calculation:</div>

          <div class="details-eqn">
            $$
            [7] \qquad P = \left( \frac{y_{A}}{\gamma_{A} P_{A}^{sat}} + \frac{y_{B}}{\gamma_{B} P_{B}^{sat}} \right)^{-1}
            $$
          </div>

          <div class="details-text">The mole fractions of components A and B in the liquid in the boiling flask (\(x_{A}\) and \(x_{B}\)) can be determined using the volumes \( V_{i} \) (mL), molecular weights \( MW_{i} \) (g/mol), and densities \( \rho_{i} \) (g/mL) of components A and B. First, molar density \( C_{i} \) (mol/mL) must be determined:</div>

          <div class="details-eqn">
            $$
            [8] \qquad C_{i} = \frac{ \rho_{i} }{ MW_{i} }
            $$
          </div>

          <div class="details-text">The mole fractions of components A and B can then be determined from the molar densities and volumes of each component:</div>

          <div class="details-eqn">
            $$
            [9] \qquad x_{A} = \frac{ V_{A} C_{A} }{ V_{A} C_{A} + V_{B} C_{B} }
            $$
          </div>
          
          <div class="details-eqn">
            $$
            [10] \qquad x_{B} = 1 - x_{A}
            $$
          </div>

          <div class="details-text">The volume of component A required for a liquid mole fraction \( x_{A} \) can be determined by solving equation [9] for \( V_{A} \), given that the total volume of liquid is 100 mL (\( V_{B} = 100 - V_{A} \)):</div>

          <div class="details-eqn">
            $$
            [11] \qquad V_{A} = \frac{ 100 \, x_{A} C_{B} }{ x_{A} C_{B} + C_{A} - x_{A} C_{A} }
            $$
          </div>

          <div class="details-text">Equation [11] can be used to determine the volumes \( V_{A} \) to be trialed, assuming a list of liquid mole fractions \( x_{A} \) is constructed.</div>
          
          <div style="margin-top: 2rem;"></div>
        </div>

      </div>
    </div>
  </div>

  <div class="modal fade" id="about-modal" tabindex="-1" role="dialog" aria-labelledby="about-modal-label"
    aria-hidden="true">
    <div class="modal-dialog modal-lg" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="about-modal-label">About</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close">
            <span aria-hidden="true"></span>
          </button>
        </div>
        <div class="modal-body">
          <p>
            This simulation was created in the <a href="https://www.colorado.edu/chbe" target="_blank">Department of Chemical and Biological Engineering</a>, at University of Colorado Boulder for <a href="http://www.learncheme.com" target="_blank">LearnChemE.com</a> by Neil Hendren under the direction of Professor John L. Falconer. Address any questions or comments to learncheme@gmail.com. All of our simulations are open source, and are available on our <a href="https://github.com/LearnChemE/LearnChemE.github.io/" target="_blank">LearnChemE Github repository</a>.<br><br>Is your screen too small to fit this application? Try zooming-out on the web page (CTRL+"-" and CTRL+"=" on Windows, or ⌘+"-" and ⌘+"=" on Mac), then refreshing the page. This application is not compatible with Internet Explorer or web browsers that do not support WebGL and HTML5. Recommended browsers are the latest versions of: Chrome, Safari, Firefox, Edge, and Opera.
          </p>
          <div class="about-reference-1">
            The vapor-liquid equilibrium measurement apparatus in this virtual laboratory is based on <a href="https://patentimages.storage.googleapis.com/f9/04/f4/299224a5e2bc7c/WO2017085744A1.pdf" target="_blank">a patent by N. Atmaram<sup>1</sup></a>.
          </div>
          <div class="about-reference-2">
            <sup>1</sup>Atmaram, N. (2020). U.S. Patent No. 10,866,199. Washington, DC: U.S. Patent and Trademark Office.
          </div>
        </div>
      </div>
    </div>
  </div>
</body>

</html>